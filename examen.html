<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        canvas {
            background-color: black;
        }

        body {
            background-color: white;
        }
    </style>
</head>
<body>
<center>
    <canvas width="700" height="500" id="myCanvas"></canvas>
</center>
<img src="minions_PNG54.png" id="mi_imagen" style="display: none;" alt="">
<script>
    var canvas = document.getElementById('myCanvas');
    var ctx = canvas.getContext('2d');

    var img = new Image();
    img.src = "minions_PNG54.png";

    let x = 20;
    let y = 20;

    const velocidad = 10;

    window.requestAnimationFrame = (function () {
        return window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame ||
            function (callback) {
                window.setTimeout(callback, 17);
            };
    }());

    function margen(ctx) {
        ctx.lineWidth = 5;
        ctx.strokeStyle = "blue";

        // Margen
        ctx.beginPath();
        ctx.moveTo(5, 5);
        ctx.lineTo(5, 495);
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(5, 496);
        ctx.lineTo(695, 495);
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(696, 496);
        ctx.lineTo(696, 5);
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(695, 5);
        ctx.lineTo(5, 5);
        ctx.stroke();

        ctx.lineWidth = 2.5;
    }

    function drawRoundedRectangles(ctx, rectangles) {
        rectangles.forEach(function (rect) {
            ctx.beginPath();
            roundedRect(ctx, rect.x, rect.y, rect.width, rect.height, rect.radius);
            ctx.stroke();
            ctx.closePath();
        });
    }

    let rectangles = [
        { x: 260, y: 60, width: 170, height: 15, radius: 10 },
        { x: 260, y: 435, width: 170, height: 15, radius: 10 },
        { x: 165, y: 130, width: 59, height: 20, radius: 10 },
        { x: 470, y: 130, width: 59, height: 20, radius: 10 },
        { x: 165, y: 330, width: 59, height: 20, radius: 10 },
        { x: 470, y: 330, width: 59, height: 20, radius: 10 },
        { x: 270, y: 150, width: 160, height: 200, radius: 10 },
        
        { x: 190, y: 7, width: 25, height: 60,radius: 0},
        { x: 471, y: 7, width: 25, height: 60,radius: 0},
        { x: 190, y: 434, width: 25, height: 60,radius: 0},
        { x: 471, y: 434, width: 25, height: 60,radius: 0},
        //L
        { x: 60, y: 95, width: 25, height: 60,radius: 0},
        { x: 60, y: 75, width: 60, height: 20,radius: 0},
        { x: 60, y: 364, width: 25, height: 60,radius: 0},
        { x: 60, y: 423, width: 60, height: 20,radius: 0},
        //L abajo
        { x: 626, y: 95, width: 25, height: 60,radius: 0},
        { x: 591, y: 75, width: 60, height: 20,radius: 0},
        { x: 626, y: 364, width: 25, height: 60,radius: 0},
        { x: 591, y: 423, width: 60, height: 20,radius: 0},
    ];

    function roundedRect(ctx, x, y, width, height, radius) {
        ctx.beginPath();
        ctx.moveTo(x, y + radius);
        ctx.arcTo(x, y + height, x + radius, y + height, radius);
        ctx.arcTo(x + width, y + height, x + width, y + height - radius, radius);
        ctx.arcTo(x + width, y, x + width - radius, y, radius);
        ctx.arcTo(x, y, x, y + radius, radius);
        ctx.stroke();
    }

    function drawRectangles() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    for (var i = 0; i < rectangles.length; i++) {
        ctx.beginPath();
        ctx.rect(rectangles[i].x, rectangles[i].y, rectangles[i].width, rectangles[i].height);
        ctx.fillStyle = 'blue'; 
        ctx.fill();
        ctx.closePath();
    }

    ctx.drawImage(img, x, y, 35, 35);
    margen(ctx);
    requestAnimationFrame(drawRectangles);
}



    img.onload = function () {
        drawRectangles();
        
    };

    document.addEventListener("keydown", function (e) {
        var newX = x;
        var newY = y;
        
        switch (e.keyCode) {
            case 87:
                newY -= velocidad;
                break;

            case 83:
                newY += velocidad;
                break;

            case 68:
                newX += velocidad;
                break;

            case 65:
                newX -= velocidad;
                break;
        }

        var collision = false;
        for (var i = 0; i < rectangles.length; i++) {
            if (
                newX < rectangles[i].x + rectangles[i].width &&
                newX + 35 > rectangles[i].x &&
                newY < rectangles[i].y + rectangles[i].height &&
                newY + 35 > rectangles[i].y
            ) {
                collision = true;
                break;
            }
        }

        if (!collision) {
            x = newX;
            y = newY;
        }
    });

</script>
</body>
</html>
